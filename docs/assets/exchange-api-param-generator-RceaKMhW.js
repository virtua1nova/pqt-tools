import{r as u,a as H,c as y,b as a,d as S,w as b,e as T,v as w,t as U,o as h}from"./index-Rjs7vfrg.js";const V={class:"container1"},P={style:{"margin-bottom":"5px"}},R={style:{"margin-bottom":"5px"}},X={style:{display:"flex","align-items":"flex-start"}},q={key:0},z={style:{display:"flex","align-items":"flex-start"}},B={style:{"word-break":"break-all","font-size":"13px",color:"#855454","margin-top":"5px"}},K=["innerHTML"],m="cost",v="amount",O="curl",$="PowerShell",Q={__name:"exchange-api-param-generator",setup(D){const p=u(""),c=u(!1),x=u(""),s=H({type:"",part1:null,part2:null,part3:null}),r=u(""),f=u(""),g=/[\-]+\w+\s+/;function k(i,t){let e="--data-raw",o=i.lastIndexOf(e);if(o===-1&&(e="--data-binary",o=i.lastIndexOf(e)),o===-1)return;o+=e.length,t.type=O,t.part1=i.slice(0,o);let n=i.slice(o);const l=n.match(g);l&&(t.part3=n.slice(l.index),n=n.slice(0,l.index)),n=n.trim().slice(1,-1),t.part2=n}function I(i,t){const e="-Body";let o=i.lastIndexOf(e);if(o===-1)return;o+=e.length,t.type=$,t.part1=i.slice(0,o);let n=i.slice(o);const l=n.match(g);l&&(t.part3=n.slice(l.index),n=n.slice(0,l.index)),n=n.trim().slice(1,-1),t.part2=n}function _(){let i=p.value;if(!i){window.alert("请输入抓包参数");return}if(i.startsWith(O)?k(i,s):i.startsWith("Invoke-WebRequest")&&I(i,s),!s.part1||!s.part2)return window.alert("解析失败, 参数格式是否正确?");const t=s.part2.split("&");t.sort();const e={};for(const o of t){let[n,l]=o.split("=");if(n===m){l=decodeURIComponent(l),l=JSON.parse(l.replace(/\+/g,""));for(const d of l)d.unit=d.value/e[v]}e[n]=l}if(!e[v]&&!e[m]){window.alert("请输入正确的抓包参数");return}s.part2Parsed=e,c.value=!0,x.value=e[v]}function A(){let i=f.value;if(!i){window.alert("请输入兑换数量");return}if(i=i>>0,i<1){window.alert("请输入正确的兑换数量");return}let t="";const e={...s.part2Parsed};e[v]=i;for(const o in e)if(o===m){const n=[];for(const l of e[o]){const d={...l};d.value=""+l.unit*i,delete d.unit,n.push(d)}t+=`${o}=${encodeURIComponent(JSON.stringify(n))}&`}else t+=`${o}=${e[o]}&`;r.value=`${s.part1} '${t.slice(0,-1)}'`,s.part3&&(r.value+=` ${s.part3}`)}function C(){r.value&&(navigator.clipboard.writeText(r.value),window.alert("复制成功"))}function E(){r.value&&(r.value=""),c.value&&(c.value=!1),p.value&&(p.value="")}return(i,t)=>(h(),y("div",V,[t[4]||(t[4]=a("p",{style:{"margin-bottom":"10px","font-size":"18px","font-weight":"500"}},"兑换参数转换器",-1)),t[5]||(t[5]=a("div",{style:{"margin-bottom":"5px",color:"rgb(133, 84, 84)","font-size":"14px"}},"基本使用方法: 解析 -> 生成 -> 复制 -> 粘贴[到终端] -> 执行",-1)),a("div",P,[a("div",R,[t[2]||(t[2]=a("label",{for:"command",style:{display:"inline-block","margin-bottom":"5px"}}," 抓包参数: ",-1)),a("div",X,[b(a("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),placeholder:"请输入",id:"command",style:{width:"360px","margin-right":"10px"},rows:"4"},null,512),[[w,p.value]]),a("button",{onClick:_,style:{"margin-right":"10px"}},"解析"),c.value?(h(),y("span",q," 成功, 当前兑换数量为: "+U(x.value),1)):T("",!0)])]),a("div",null,[t[3]||(t[3]=a("label",{for:"newAmount",style:{display:"inline-block","margin-bottom":"5px"}}," 兑换数量: ",-1)),a("div",z,[b(a("input",{type:"text",placeholder:"请输入",id:"newAmount",style:{"margin-right":"10px",height:"24px"},"onUpdate:modelValue":t[1]||(t[1]=e=>f.value=e)},null,512),[[w,f.value,void 0,{number:!0}]]),a("button",{onClick:A,style:{"margin-right":"10px"}},"生成"),a("button",{onClick:C,style:{"margin-right":"10px"}},"复制"),a("button",{onClick:E},"清除")])]),a("div",B,[a("div",{innerHTML:r.value},null,8,K)])]),t[6]||(t[6]=S('<div>本工具需要提供原始的抓包数据，以下面的数据为例：</div><div style="font-size:13px;padding-left:10px;color:#855454;"><div>curl -X POST &#39;https://us.nkrpg.com/api/exchange/exchangeItem&#39; \\</div><div>-H &#39;Host: us.nkrpg.com&#39; \\</div><div>-H &#39;User-Agent: Mozilla/5.0...</div><div>-H &#39;Accept: */*&#39; \\</div><div>-H &#39;Content-Type: application/x-www-form-urlencoded&#39; \\</div><div>-H &#39;X-QOOKIA-DEVICE-TYPE: web&#39; \\</div><div>-H &#39;X-QOOKIA-DEVICE: 26bed0e5-e198-4a91-93f7-58a8597b4932&#39; \\</div><div>-H &#39;X-QOOKIA-SERVER-PREFIX: UVG&#39; \\</div><div>-H &#39;X-QOOKIA-USER: UVG0000009756&#39; \\</div><div> -H &#39;X-QOOKIA-DIGEST: 2ec453e2f13b0200b1cbd761dfc823b05dfd260d&#39; \\ </div><div>-H &#39;X-QOOKIA-PACK: 6a18fc16671e92d6a20655bd74ba1fd6c04bb4d1&#39; \\</div><div>...</div><div>--data-raw &#39;amount=2&amp;setting_id=539&amp;cost=%5B...%5D&#39;</div></div><div>将其复制到输入框内即可。</div><span style="color:red;font-size:12px;">(注意一定要包含兑换参数，如&quot;--data-raw&quot;, 或&quot;-Body&quot;)</span><div style="font-size:13px;">若是PowerShell, 一般为: Invoke-WebRequest -UseBasicParsing -Uri &quot;https://us.nkrpg.com...</div>',5))]))}};export{Q as default};
